############################################################################ this file to get fig6 in a form suitable for AusJPS publication#### assumes firstPrefs.r has been run#### simon jackman, sept 2005###########################################################################postscript(file="figure6.ps",           horizontal=F,           #paper="a4",           #height=8.5,width=11,           width = 13/2.54,           height=8.5/11 * 13/2.54,           family=dinfamily)par(oma=rep(0,4),    mar=c(1.75,2.5,.75,2.25),    mgp=c(1.5,.5,0),    tcl=-.25,    cex.axis=.65,    cex.main=.65,    cex.lab=.65,    las=1)xlocs <- jitter(data$date)plot(dseq,     alphaFirst.bar,     type="n",     axes=F,     xlab="",     ylab=toupper("Coalition 1st preferences (%)"),     xlim=c(min(data$date)-1,     electionDay),     ylim=range(data$coalition/100),     yaxs="i",     xaxs="i")axis(1,at=datetcks,labels=datelabs)axis(2,at=seq(from=.38,to=.50,by=.02),     labels=as.character(100*seq(.38,.50,by=.02)))axis(4,at=c(seq(from=.38,to=.50,by=.02),.467),     labels=c(as.character(100*seq(.38,.50,by=.02)),"46.7"))lastDay <- match(max(data$date),dseq)ok <- 1:lastDaypolygon(x=c(dseq[ok],rev(dseq[ok])),        y=c(alphaFirst.ci[1,ok],rev(alphaFirst.ci[2,ok])),        border=F,        col=gray(.75))lines(dseq,alphaFirst.bar,lwd=3)## overlay eventspar(xpd=T)for(i in 1:length(eventTicks)){  lines(x=rep(eventTicks[i],2),        y=par()$usr[3:4],        col=gray(.45))  text(x=eventTicks[i],       y=par()$usr[4] + .002,       cex=.65,       i)}## now overlay poll datafor(i in 1:dim(data)[1]){  points(xlocs[i],data$coalition[i]/100,pch=16,cex=1,col="black")  #lines(x=rep(xlocs[i],2),  #      y=c(data$lo[i],data$up[i]))}for(i in 1:dim(data)[1]){  text(xlocs[i],data$coalition[i]/100,       unclass(data$org)[i],       cex=.5,       col="white")}## legend infoy0 <- .3975text(x=par()$usr[1]*.98 + par()$usr[2]*.02,     y=y0,     cex=.65,     "POLLS:",     adj=0)for(i in 1:5){    y0 <- y0 - .005    points(par()$usr[1]*.97 + par()$usr[2]*.03,           y=y0,           pch=16,col="black",cex=1)    text(par()$usr[1]*.97 + par()$usr[2]*.03,         y=y0,i,cex=.5,col="white")    text(par()$usr[1]*.95 + par()$usr[2]*.05,         y=y0,         adj=0,cex=.65,         toupper(levels(data$org)[i]))}dev.off()system("epstopdf figure6.ps")